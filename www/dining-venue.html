<!DOCTYPE html> 
<html> 
	<head> 
	<title>Dining Services</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/jquery.mobile-1.3.2.min.css" />
	<link rel="stylesheet" href="assets/scu.css" />
	<link rel="stylesheet" href="assets/secondary.css" />
	<script src="assets/jquery-1.10.2.min.js"></script> 
	<script src="assets/jquery.mobile-1.3.2.min.js"></script>
	<link rel="stylesheet" href="assets/responsive-nav.css" />
    <script src="assets/responsive-nav.js"></script>
   
	</head> 
<body> 

<div data-role="page" class="type-interior" data-theme="a">
	<script>
	   
		function getUrlVars() {
		var vars = [], hash;
		var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
		for(var i = 0; i < hashes.length; i++)
		    {
		        hash = hashes[i].split('=');
		        vars.push(hash[0]);
		        vars[hash[0]] = hash[1];
		    }
		return vars;
		}
		
		function navmenu(n,m) {
		    $.ajax({
		     type: "GET",
		     url: 'http://m.scu.edu/nav/'+n+'.json',
		     dataType: 'json',
		     beforeSend: function(x) {
		      if(x && x.overrideMimeType) {
		       x.overrideMimeType("application/j-son;charset=UTF-8");
		      }
			 },
			 success: function(data){
			 	var output = '';
			    for (var i in data.menuitems) {
				    output += '<li><a href="' + data.menuitems[i].href + '"';
				    //output += ' target="_blank"';
				    output += ' data-ajax="false"';
				    output += '>';
				    output += data.menuitems[i].label;
				    output += '</a></li>';
		        }
				$("#"+m).append(output).listview("refresh");
		     }
			});
		}
		

	</script>
	<div id="header">
		<a data-ajax="false" href="index.html" class="homenav"><img alt="" src="assets/38-house.png" /></a>
	</div><!-- /header -->

	<div data-role="content">
    <div class="content-primary">
    	<div id="nav">
	      <ul id="tdining"></ul>
	    </div>
	    <script>
	    	navmenu('dining','tdining');
	        var navigation = responsiveNav("#nav", {
	            animate: false,        // Boolean: Use CSS3 transitions, true or false
				insert: "before",      // String: Insert the toggle before or after the navigation
				openPos: "relative",  // String: Position of the opened nav, relative or static
				jsClass: "js"        // String: 'JS enabled' class which is added to <html> el
	      });
	    </script>
	    <h2 id="idining" class="pagetitle"><a href="index.html#dining" data-ajax="false">Dining Services</a></h2>
	    <div data-role="navbar">
    	<ul id="diningnav"></ul>
    	</div>
     	<div id="subtitle"></div>
    	<div id="pagecontent"></div>
    	<script>
				var navbar = '';	
				var durl = '';
				var epath = '.div.div.div.div';
				
				var v = getUrlVars()["v"];
				var p = getUrlVars()["p"];
				var l = getUrlVars()["l"];
				var pt = "Dining Services";
				var mclass = '';
				var navArray = ["Hours","About"];
				
				if (v == 'marketplace') {
					if (p == 'Hours') {
						durl = 'http://scu.cafebonappetit.com/content/marketsquare.html';
						pt = "Marketplace Hours";
					} else if (p == 'About') {
						durl = 'http://scu.cafebonappetit.com/content/marketsquare.html';
						epath = '.div.div.div.div[2].p[2]';
						pt = "About the Marketplace";
					} else if (p == 'Menu') {
						durl = 'http://scu.cafebonappetit.com/content/marketsquare-weekly_menu.html';
						pt = "Marketplace Menu";
					}
				}
				
				if (v == 'bronco') {
					if (p == 'Hours') {
						durl = 'http://scu.cafebonappetit.com/content/bronco.html';
						pt = "The Bronco Hours";
					} else if (p == 'About') {
						durl = 'http://scu.cafebonappetit.com/content/bronco.html';
						epath = '.div.div.div.div[2].p[1]';
						pt = "About the Bronco";
					} else if (p == 'Menu') {
						durl = 'http://scu.cafebonappetit.com/content/bronco-weekly_menu.html';
						epath = '.div.div.div[2].div.table';
						pt = "The Bronco Menu";
					}
				}
				
				if (v == 'mission') {
					if (p == 'Hours') {
						durl = 'http://scu.cafebonappetit.com/content/missionbakery.html';
						pt = "Mission Bakery Hours";
					} else if (p == 'About') {
						durl = 'http://scu.cafebonappetit.com/content/missionbakery.html';
						epath = '.div.div.div.div[2].p[2]';
						pt = "About the Mission Bakery";
					}
				}
				
				if (v == 'adobe') {
					if (p == 'Hours') {
						durl = 'http://www.adobelodgecatering.com/adobe/cafemenu.html';
						epath = '.div.div.div';
						pt = "Adobe Lodge Hours and Menu";
					} else if (p == 'About') {
						durl = 'http://www.adobelodgecatering.com/adobe/adobelodge.html';
						epath = '.div.div.div';
						pt = "About the Adobe Lodge";
					}
				}
				
				if (v == 'cellar') {
					if (p == 'Hours') {
						durl = 'http://scu.cafebonappetit.com/content/cellarmarket.html';
						pt = "Cellar Market Hours";
					} else if (p == 'About') {
						durl = 'http://scu.cafebonappetit.com/content/cellarmarket.html';
						epath = '.div.div.div.div[2].p[2]';
						pt = "About the Cellar Market";
					}
				}
				
				if (v == 'cadence') {
					if (p == 'Hours') {
						durl = 'http://scu.cafebonappetit.com/content/cadence.html';
						pt = "Cadence Cyber Cafe Hours";
					} else if (p == 'About') {
						durl = 'http://scu.cafebonappetit.com/content/cadence.html';
						epath = '.div.div.div.div[2].p[2]';
						pt = "About the Cadence Cyber Cafe";
					}
				}
				
				if (v == 'sunstream') {
					if (p == 'Hours') {
						durl = 'http://scu.cafebonappetit.com/content/sunstream.html';
						pt = "Sunstream Cafe Hours";
					} else if (p == 'About') {
						durl = 'http://scu.cafebonappetit.com/content/sunstream.html';
						epath = '.div.div.div.div[2].p[2]';
						pt = "About the Sunstream Cafe";
					}
				}

				for(var i=0; i<navArray.length; i++){
				  if (p == navArray[i]) {
				  	mclass = ' class="ui-btn-active"';
				  	} else {
				  	mclass = '';
				  }
				  navbar += '<li><a' + mclass + ' rel="external" href="dining-venue.html?v='+v+'&amp;p='+navArray[i]+'&amp;l='+l+'">'+navArray[i]+'</a></li>';
				}
				navbar += '<li><a rel="external" href="http://m.scu.edu/map/index.cfm?loc_id='+l+'">Map</a></li>';
				
				$('#diningnav').html(navbar);
				
				$('#subtitle').html(pt);
				
				jQuery(function($){
		    	$.ajax({
		            url: "http://m.scu.edu/docs/ws/dining/index.cfc?method=getPageContent&dspage="+durl+"&elementpath="+epath+"&returnformat=plain",
		            success: function(response) {
		            	//alert(response);
		            	$('#pagecontent').html(response);
		            	},
					    error: function(ErrorMsg) {
					       console.log('Error');
					    }
					    
			        });
			    });
		</script>
	</div>
	<div class="content-secondary">
	<ul data-role="listview" class="ui-listview" data-inset="true"></ul>
		<ul id="mdining" data-role="listview" data-inset="true"></ul>
	    <script>
		    navmenu('dining','mdining');
	    </script>
	</div>
	</div>
	

	
	<div data-role="footer" id="footer">
		<p style="text-align:center;">&copy; Santa Clara University</p>
	</div><!-- /footer -->
</div><!-- /page -->

</body>
</html>