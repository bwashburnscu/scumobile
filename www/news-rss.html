<!DOCTYPE html> 
<html> 
	<head> 
	<title>News Feeds</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/jquery.mobile-1.3.2.min.css" />
	<link rel="stylesheet" href="http://m.scu.edu/includes/css/scu.css" />
	<link rel="stylesheet" href="http://m.scu.edu/includes/css/secondary.css" />
	<script src="assets/jquery-1.10.2.min.js"></script> 
	<script src="assets/jquery.mobile-1.3.2.min.js"></script>
	<script src="http://m.scu.edu/includes/js/submenu.js"></script>
	<link rel="stylesheet" href="http://m.scu.edu/includes/css/submenu.css" /> 
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    google.load("feeds", "1");
    
    var rssfeed = new Array();
	rssfeed[0] = "http://www.scu.edu/syn/blog226.xml";
	rssfeed[1] = "http://www.scu.edu/syn/blog93.xml";
	rssfeed[2] = "http://santaclarabroncosblog.com/feed/";
	rssfeed[3] = "http://www.thesantaclara.com/se/the-santa-clara-rss-1.1833635";
	rssfeed[4] = "http://feeds.feedburner.com/SantaClaraLawNews";

    function initialize() {
      var feedid = getUrlVars()["feed"];
      var feed = new google.feeds.Feed(rssfeed[feedid]);
      feed.setNumEntries(10);
      feed.setResultFormat(google.feeds.Feed.MIXED_FORMAT);
      feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("feed");
          var rssContent = "";
          var imgUrl = "";
          $("#subtitle").html(result.feed.title);
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
           // if (entry.xmlNode.getElementsByTagName("enclosure").length > 0) {
            	//imgUrl =  entry.xmlNode.getElementsByTagName("enclosure")[0].getAttribute("url");
            	//imgUrl = "<img src='" + imgUrl + "' />";
            	//} else {
            	//imgUrl = '';
            	//}
            //rssContent += "<div data-role='collapsible' data-theme='a'><h3>" + entry.title + "</h3><h4>" + entry.title + "</h4><h4>" + entry.publishedDate + "</h4><p>" + entry.contentSnippet + "</p><p><a href='" + entry.link + "'>Continue Reading &raquo;</a></p></div>";
            if(entry.link.indexOf('?c=') > 0) {
            	var cid = entry.link.split('?c=');
            	entry.link = 'news-blog.html?cid=' + cid[1];
            }
            rssContent += "<li><a rel='external' href='" + entry.link + "'>" + imgUrl + "<h3>" + entry.title + "</h3><p>" + entry.publishedDate + "</p></a></li>";
            }          
          container.innerHTML=rssContent;
        }
        $("#feed").listview("refresh");
      });
    }
    google.setOnLoadCallback(initialize);
    
    </script>
	</head> 
<body> 

<div data-role="page" class="type-interior" data-theme="a">
	<script src="http://m.scu.edu/includes/js/navmenu.js"></script>
	<script src="http://m.scu.edu/includes/js/geturlvars.js"></script>
	<div id="header">
		<a data-ajax="false" href="#" data-icon="back" data-rel="back" title="Go back" class="backnav"><img alt="" src="assets/back.png" /></a>
		<a data-ajax="false" href="index.html" class="homenav"><img alt="" src="assets/38-house.png" /></a>
	</div><!-- /header -->

	<div data-role="content">
	    <div class="content-primary">
	    <h2 id="inews" class="pagetitle"><a href="news.html" data-ajax="false">SCU News</a></h2>
	    <nav id="mobile">

		    <a class="navicon mtoggle" href="#">MAIN MENU</a>
		
		    <ul id="submenu"></ul>
		    
		    <script>
		    	navmenu('news','submenu');
		    </script>
	
		</nav>
	    <div id="subtitle"></div>
		<ul data-role="listview" id="feed">
		</ul>
	</div>
	<div class="content-secondary">
		<ul id="fullmenu" data-role="listview" data-inset="true"></ul>
	    <script>
		    navmenu('news','fullmenu');
	    </script>
	</div>
	</div>
	

	
	<div data-role="footer" id="footer">
		<p style="text-align:center;">&copy; Santa Clara University</p>
	</div><!-- /footer -->
</div><!-- /page -->

</body>
</html>